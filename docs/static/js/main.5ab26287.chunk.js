(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(30)},23:function(e,t,a){},27:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(15),i=a.n(n),l=(a(23),a(4)),c=a(5),u=a(7),o=a(6),m=a(8),d=a(34),h=a(33),b=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{className:"app__header"},r.a.createElement("h1",{className:"app__header-title"},"StyleSage - Platform user analytics"))}}]),t}(s.Component),_=a(31),p=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("aside",{className:"app__aside"},r.a.createElement("ul",{className:"aside__list"},r.a.createElement(_.a,{to:"/",className:"aside__item-link"},r.a.createElement("li",{className:"aside__item"},"Overview")),r.a.createElement(_.a,{to:"/session-list",className:"aside__item-link"},r.a.createElement("li",{className:"aside__item"},"Session List")),r.a.createElement(_.a,{to:"/charts-usage",className:"aside__item-link"},r.a.createElement("li",{className:"aside__item"},"Charts Usage"))))}}]),t}(s.Component),v=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("h2",null,"Overview in progress...")}}]),t}(s.Component),f=a(3),E=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.getQueryUsername,a=e.resultsNumber;return r.a.createElement("div",{className:"search__container"},r.a.createElement("div",{className:"search__input-container"},r.a.createElement("label",{htmlFor:"username"}),r.a.createElement("input",{type:"text",id:"username",className:"search__input",placeholder:"search",name:"username",onKeyUp:t})),r.a.createElement("p",{className:"search__info-total"},"Showing ",a," entries"))}}]),t}(s.Component),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={row:""},a.mapResults=a.mapResults.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"mapResults",value:function(e){var t=this;return e.map(function(e,a){return r.a.createElement("tr",{className:"table__tr",key:a},r.a.createElement("td",{className:"table__td"},e.user__username),r.a.createElement("td",{className:"table__td"},t.props.renderTime(e.min_timestamp)),r.a.createElement("td",{className:"table__td"},t.renderDuration(e.duration_sec)),r.a.createElement("td",{className:"table__td"},e.request_count))})}},{key:"renderDuration",value:function(e){var t=parseInt(e%60),a=parseInt(e/60),s=parseInt(a%60),r=parseInt(a/60);return 0!==r?r+"h"+s+"m"+t+"s":0!==s?s+"m"+t+"s":t+"s"}},{key:"render",value:function(){var e=this.props,t=e.sessionsList,a=e.orderResultsUsername,s=e.orderResultsTimeStarted,n=e.orderResultsDuration,i=e.orderResultsRequestCount;return r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"table__thead"},r.a.createElement("tr",{className:"table__tr"},r.a.createElement("th",{className:"table__th"},r.a.createElement("div",{className:"table__content"},r.a.createElement("p",{className:"table__title"},"Username"),r.a.createElement("div",{className:"table__icons"},r.a.createElement("i",{className:"zmdi zmdi-chevron-up","data-arrow":"up",onClick:a}),r.a.createElement("i",{className:"zmdi zmdi-chevron-down","data-arrow":"down",onClick:a})))),r.a.createElement("th",{className:"table__th"},r.a.createElement("div",{className:"table__content"},r.a.createElement("p",{className:"table__title"},"Time Started (local TZ)"),r.a.createElement("div",{className:"table__icons"},r.a.createElement("i",{className:"zmdi zmdi-chevron-up","data-arrow":"up",onClick:s}),r.a.createElement("i",{className:"zmdi zmdi-chevron-down","data-arrow":"down",onClick:s})))),r.a.createElement("th",{className:"table__th"},r.a.createElement("div",{className:"table__content"},r.a.createElement("p",{className:"table__title"},"Duration"),r.a.createElement("div",{className:"table__icons"},r.a.createElement("i",{className:"zmdi zmdi-chevron-up","data-arrow":"up",onClick:n}),r.a.createElement("i",{className:"zmdi zmdi-chevron-down","data-arrow":"down",onClick:n})))),r.a.createElement("th",{className:"table__th"},r.a.createElement("div",{className:"table__content"},r.a.createElement("p",{className:"table__title"},"Request Count"),r.a.createElement("div",{className:"table__icons"},r.a.createElement("i",{className:"zmdi zmdi-chevron-up","data-arrow":"up",onClick:i}),r.a.createElement("i",{className:"zmdi zmdi-chevron-down","data-arrow":"down",onClick:i})))))),r.a.createElement("tbody",{className:"table__tbody"},this.mapResults(t)))}}]),t}(s.Component),O=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(o.a)(t).call(this,e))).state={userData:[],activePetition:!1,queryUsername:"",sessionsList:[],duplicatedArray:!1,filter:"",resultsNumber:"0"},a.renderTime=a.renderTime.bind(Object(f.a)(Object(f.a)(a))),a.getQueryUsername=a.getQueryUsername.bind(Object(f.a)(Object(f.a)(a))),a.orderResultsUsername=a.orderResultsUsername.bind(Object(f.a)(Object(f.a)(a))),a.orderResultsTimeStarted=a.orderResultsTimeStarted.bind(Object(f.a)(Object(f.a)(a))),a.orderResultsDuration=a.orderResultsDuration.bind(Object(f.a)(Object(f.a)(a))),a.orderResultsRequestCount=a.orderResultsRequestCount.bind(Object(f.a)(Object(f.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchSessions()}},{key:"fetchSessions",value:function(){var e=this;fetch("http://adalab.stylesage.co/api/v1/sessions/").then(function(e){return e.json()}).then(function(t){e.setState({userData:t,sessionsList:t.sessions,duplicatedArray:!0,resultsDate:"",resultsNumber:""}),e.calculateResultsNumber(e.state.sessionsList),e.calculateFromToDate(e.state.userData)})}},{key:"calculateFromToDate",value:function(){var e=this.renderTime(this.state.userData.from_date)+" and "+this.renderTime(this.state.userData.to_date);this.setState({resultsDate:e})}},{key:"calculateResultsNumber",value:function(e){var t=parseInt(e.length)+"/"+parseInt(this.state.userData.sessions.length);this.setState({resultsNumber:t})}},{key:"addZero",value:function(e){return e.length<2&&(e="0"+e),e}},{key:"renderTime",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+this.addZero((t.getMonth()+1).toString())+"-"+this.addZero(t.getDate().toString())+","+this.addZero(t.getHours().toString())+":"+this.addZero(t.getMinutes().toString())}},{key:"filterUserame",value:function(e){return this.state.userData.sessions.filter(function(t){return t.user__username.includes(e)})}},{key:"getQueryUsername",value:function(e){var t,a=e.currentTarget.value,s=this.filterUserame(a);switch(this.state.filter){case"Username-up":t=this.orderUsername(s);break;case"Username-down":t=this.orderUsername(s).reverse();break;case"TimeStarted-up":t=this.orderTimeStarted(s);break;case"TimeStarted-down":t=this.orderTimeStarted(s).reverse();break;case"Duration-up":t=this.orderDuration(s);break;case"Duration-down":t=this.orderDuration(s).reverse();break;case"RequestCount-up":t=this.orderRequestCount(s);break;case"RequestCount-down":t=this.orderRequestCount(s).reverse();break;default:t=s}this.calculateResultsNumber(t),this.setState({queryUsername:a,sessionsList:t})}},{key:"orderUsername",value:function(e){return e.sort(function(e,t){var a=e.user__username.toUpperCase(),s=t.user__username.toUpperCase();return a<s?-1:a>s?1:0})}},{key:"orderResultsUsername",value:function(e){var t=this.orderUsername(this.state.sessionsList);"down"===e.currentTarget.getAttribute("data-arrow")?this.setState({sessionsList:t.reverse(),filter:"Username-down"}):this.setState({sessionsList:t,filter:"Username-up"})}},{key:"orderTimeStarted",value:function(e){return e.sort(function(e,t){return new Date(e.min_timestamp)-new Date(t.min_timestamp)})}},{key:"orderResultsTimeStarted",value:function(e){var t=this.orderTimeStarted(this.state.sessionsList);"down"===e.currentTarget.getAttribute("data-arrow")?this.setState({sessionsList:t.reverse(),filter:"TimeStarted-down"}):this.setState({sessionsList:t,filter:"TimeStarted-up"})}},{key:"orderDuration",value:function(e){return e.sort(function(e,t){return e.duration_sec-t.duration_sec})}},{key:"orderResultsDuration",value:function(e){var t=this.orderDuration(this.state.sessionsList);"down"===e.currentTarget.getAttribute("data-arrow")?this.setState({sessionsList:t.reverse(),filter:"Duration-down"}):this.setState({sessionsList:t,filter:"Duration-up"})}},{key:"orderRequestCount",value:function(e){return e.sort(function(e,t){return e.request_count-t.request_count})}},{key:"orderResultsRequestCount",value:function(e){var t=this.orderRequestCount(this.state.sessionsList);"down"===e.currentTarget.getAttribute("data-arrow")?this.setState({sessionsList:t.reverse(),filter:"RequestCount-down"}):this.setState({sessionsList:t,filter:"RequestCount-up"})}},{key:"render",value:function(){var e=this.state,t=e.sessionsList,a=e.duplicatedArray,s=e.resultsDate,n=e.resultsNumber;return r.a.createElement("div",{className:"app__container"},r.a.createElement("main",{className:"app__main"},r.a.createElement("div",{className:"breadcrumb__container"},r.a.createElement("ul",{className:"breadcrumb__container-list"},r.a.createElement("li",{className:"breadcrumb__container-item"},r.a.createElement(_.a,{to:"/"},"Overview")),">",r.a.createElement("li",{className:"breadcrumb__container-item"},r.a.createElement("span",null,"Sessions")))),r.a.createElement("div",{className:"panel__session"},r.a.createElement("i",{className:"zmdi zmdi-format-list-bulleted icon"}),r.a.createElement("h2",{className:"panel__session-title"},"Sessions between ",s)),r.a.createElement(E,{getQueryUsername:this.getQueryUsername,resultsNumber:n}),r.a.createElement("div",{className:"table__container"},0!==a.length?r.a.createElement(N,{renderTime:this.renderTime,orderResultsUsername:this.orderResultsUsername,orderResultsTimeStarted:this.orderResultsTimeStarted,orderResultsDuration:this.orderResultsDuration,orderResultsRequestCount:this.orderResultsRequestCount,sessionsList:t}):r.a.createElement("p",null,"Looking for data..."))))}}]),t}(s.Component),j=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"ChartsUsage under construction...")}}]),t}(s.Component),y=(a(27),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(b,null),r.a.createElement("div",{className:"page__wrapper"},r.a.createElement(p,null),r.a.createElement(d.a,null,r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(v,null)}}),r.a.createElement(h.a,{path:"/session-list",render:function(){return r.a.createElement(O,null)}}),r.a.createElement(h.a,{path:"/charts-usage",render:function(){return r.a.createElement(j,null)}}))))}}]),t}(s.Component)),k=a(32);i.a.render(r.a.createElement(k.a,null,r.a.createElement(y,null)),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.5ab26287.chunk.js.map