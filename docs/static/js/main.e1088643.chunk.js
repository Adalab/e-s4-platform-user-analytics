(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(30)},23:function(e,t,a){},27:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(15),l=a.n(r),i=(a(23),a(3)),c=a(4),o=a(6),u=a(5),m=a(7),d=a(2),h=a(34),_=a(33),p=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.onClick;return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:"app__header"},n.a.createElement("div",{className:"button__container"},n.a.createElement("div",{className:"div__btn btn",type:"button",onClick:e},n.a.createElement("i",{className:"zmdi zmdi-menu"}))),n.a.createElement("h1",{className:"app__header-title"},n.a.createElement("span",{className:"span-style"},"Style"),n.a.createElement("span",{className:"span-sage"},"Sage"))))}}]),t}(s.Component),b=a(31),f=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"visibility",value:function(){return!0===this.props.hiddenButton?"hidden":""}},{key:"render",value:function(){var e=this.visibility();return n.a.createElement("aside",{className:"app__aside ".concat(e)},n.a.createElement("div",{className:"app__aside-header"},n.a.createElement("i",{className:"zmdi zmdi-chart"}),n.a.createElement("p",{className:"app__aside-title"},"User analytics")),n.a.createElement("ul",{className:"aside__list"},n.a.createElement("li",{className:"aside__item"},n.a.createElement(b.a,{to:"/",className:"aside__item-link"},"Overview")),n.a.createElement("li",{className:"aside__item"},n.a.createElement(b.a,{to:"/session-list",className:"aside__item-link"},"Session List")),n.a.createElement("li",{className:"aside__item"},n.a.createElement(b.a,{to:"/charts-usage",className:"aside__item-link"},"Charts Usage"))))}}]),t}(s.Component),v=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"visibility",value:function(){return!0===this.props.hiddenButton?"":"displace"}},{key:"render",value:function(){return n.a.createElement("section",{className:"app__overview ".concat(this.visibility())},n.a.createElement("div",{className:"overview__title"},n.a.createElement("h2",null,"Welcome to Platform User Analytics")),n.a.createElement("div",{className:"overview__buttons"},n.a.createElement(b.a,{to:"/session-list",className:"aside__item-link"},n.a.createElement("div",{type:"button",className:"frame-btn frame-btn-left"},n.a.createElement("h3",{className:"aside__item-title"},"Session List"),n.a.createElement("p",{className:"aside__item-text"},"View information on user sessions,including request count and length of stay."),n.a.createElement("span",{className:"frame-btn__outline frame-btn__outline--tall"},n.a.createElement("span",{className:"frame-btn__line frame-btn__line--tall"}),n.a.createElement("span",{className:"frame-btn__line frame-btn__line--flat"})),n.a.createElement("span",{className:"frame-btn__outline frame-btn__outline--flat"},n.a.createElement("span",{className:"frame-btn__line frame-btn__line--tall"}),n.a.createElement("span",{className:"frame-btn__line frame-btn__line--flat"})),n.a.createElement("span",{className:"frame-btn__solid"}),n.a.createElement("span",{className:"frame-btn__text"}))),n.a.createElement(b.a,{to:"/charts-usage",className:"aside__item-link"},n.a.createElement("div",{type:"button",className:"frame-btn"},n.a.createElement("h3",{className:"aside__item-title"},"Chart Usage"),n.a.createElement("p",{className:"aside__item-text"},"View information on chart visualization, including use of charts by groups and date."),n.a.createElement("span",{className:"frame-btn__outline frame-btn__outline--tall"},n.a.createElement("span",{className:"frame-btn__line frame-btn__line--tall"}),n.a.createElement("span",{className:"frame-btn__line frame-btn__line--flat"})),n.a.createElement("span",{className:"frame-btn__outline frame-btn__outline--flat"},n.a.createElement("span",{className:"frame-btn__line frame-btn__line--tall"}),n.a.createElement("span",{className:"frame-btn__line frame-btn__line--flat"})),n.a.createElement("span",{className:"frame-btn__solid"}),n.a.createElement("span",{className:"frame-btn__text"})))))}}]),t}(s.Component),E=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.getQueryUsername,a=e.resultsNumber;return n.a.createElement("div",{className:"search__container"},n.a.createElement("div",{className:"search__input-container"},n.a.createElement("label",{htmlFor:"username"},n.a.createElement("span",{className:"icon__search"}," ",n.a.createElement("i",{className:"zmdi zmdi-search"})),n.a.createElement("input",{type:"text",id:"username",className:"search__input",placeholder:"search",name:"username",onKeyUp:t}))),n.a.createElement("p",{className:"search__info-total"},"Showing ",a," entries"))}}]),t}(s.Component),N=a(1),g=a.n(N),y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={row:""},a.mapResults=a.mapResults.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"mapResults",value:function(e){var t=this,a=this.props.renderTime;return e.map(function(e,s){return n.a.createElement("tr",{className:"table__tr",key:s},n.a.createElement("td",{className:"table__td table__td--user"},e.user__username),n.a.createElement("td",{className:"table__td table__td--times"},a(e.min_timestamp)),n.a.createElement("td",{className:"table__td table__td--sec"},t.renderDuration(e.duration_sec)),n.a.createElement("td",{className:"table__td table__td-req"},e.request_count))})}},{key:"renderDuration",value:function(e){var t=parseInt(e%60),a=parseInt(e/60),s=parseInt(a%60),n=parseInt(a/60);return 0!==n?n+"h"+s+"m"+t+"s":0!==s?s+"m"+t+"s":t+"s"}},{key:"render",value:function(){var e=this.props,t=e.sessionsList,a=e.orderResultsUsername,s=e.orderResultsTimeStarted,r=e.orderResultsDuration,l=e.orderResultsRequestCount;return n.a.createElement("table",{className:"table",id:"table"},n.a.createElement("thead",{className:"table__thead"},n.a.createElement("tr",{className:"table__tr-title"},n.a.createElement("th",{className:"table__th table__th-col1"},n.a.createElement("div",{className:"table__content table__content-col1"},n.a.createElement("p",{className:"table__title"},"Username"),n.a.createElement("div",{className:"table__icons"},n.a.createElement("i",{className:"zmdi zmdi-chevron-up","data-arrow":"up",onClick:a}),n.a.createElement("i",{className:"zmdi zmdi-chevron-down","data-arrow":"down",onClick:a})))),n.a.createElement("th",{className:"table__th table__th-col2"},n.a.createElement("div",{className:"table__content table__content-col2"},n.a.createElement("p",{className:"table__title"},"Times Started (local TZ)"),n.a.createElement("div",{className:"table__icons"},n.a.createElement("i",{className:"zmdi zmdi-chevron-up","data-arrow":"up",onClick:s}),n.a.createElement("i",{className:"zmdi zmdi-chevron-down","data-arrow":"down",onClick:s})))),n.a.createElement("th",{className:"table__th table__th-col3"},n.a.createElement("div",{className:"table__content table__content-col3"},n.a.createElement("p",{className:"table__title"},"Duration"),n.a.createElement("div",{className:"table__icons"},n.a.createElement("i",{className:"zmdi zmdi-chevron-up","data-arrow":"up",onClick:r}),n.a.createElement("i",{className:"zmdi zmdi-chevron-down","data-arrow":"down",onClick:r})))),n.a.createElement("th",{className:"table__th table__th-col4"},n.a.createElement("div",{className:"table__content table__content-col4"},n.a.createElement("p",{className:"table__title"},"Request Count"),n.a.createElement("div",{className:"table__icons"},n.a.createElement("i",{className:"zmdi zmdi-chevron-up","data-arrow":"up",onClick:l}),n.a.createElement("i",{className:"zmdi zmdi-chevron-down","data-arrow":"down",onClick:l})))))),n.a.createElement("tbody",{className:"table__tbody"},this.mapResults(t)))}}]),t}(s.Component);y.Proptypes={renderTime:g.a.func.isRequired,sessionsList:g.a.array.isRequired,orderResultsUsername:g.a.func.isRequired,orderResultsTimeStarted:g.a.func.isRequired,orderResultsDuration:g.a.func.isRequired,orderResultsRequestCount:g.a.func.isRequired};var k=y,O=function(e){function t(e,a){var s;return Object(i.a)(this,t),(s=Object(o.a)(this,Object(u.a)(t).call(this,e,a))).state={currentPage:1,pageCount:1,pageSize:5,controls:[],matrixControls:[[]]},s.handleSelect=s.handleSelect.bind(Object(d.a)(Object(d.a)(s))),s.createButtons=s.createButtons.bind(Object(d.a)(Object(d.a)(s))),s.getButtons=s.getButtons.bind(Object(d.a)(Object(d.a)(s))),s.setCurrentPage=s.setCurrentPage.bind(Object(d.a)(Object(d.a)(s))),s}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getButtons()}},{key:"createButtons",value:function(e,t){var a,s=this,r=e.filter(function(e){return-1!==e.indexOf(t)})[0];return r&&(a=r.map(function(e){return n.a.createElement("li",{className:"".concat("footer__button-page"," ").concat("footer__button-page"," ").concat(s.state.currentPage===e?"".concat("footer__button-page","--active"):""),onClick:function(){s.setCurrentPage(e)},key:e},e)})),a}},{key:"getButtons",value:function(){var e=this.props.sessionsList,t=this.state.pageSize,a=parseInt(e.length/t);e.length%t>0&&a++,this.setState({currentPage:1,pageCount:a}),this.createControls(a)}},{key:"createControls",value:function(e){for(var t=[],a=1;a<=e;a++)t.push(a);this.setCurrentPage(1);for(var s=[],n=0;n<=t.length;n+=4)s.push(t.slice(n,n+4));this.setState({controls:t,matrixControls:s})}},{key:"handleSelect",value:function(e){var t=this,a=e.currentTarget.value;this.setState({pageSize:parseInt(a)},function(){return t.getButtons()}),this.createControls()}},{key:"setCurrentPage",value:function(e){var t=this.props.sessionsList,a=this.state.pageSize,s=e*a,n=t.slice(s-a,s);this.setState({dataSlice:n,currentPage:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.controls,r=t.matrixControls,l=t.dataSlice,i=t.currentPage,c=[n.a.createElement("li",{className:"".concat("footer__button-page"),key:"First",onClick:function(){e.setCurrentPage(1)}},"First"),n.a.createElement("li",{className:"".concat("footer__button-page"),key:"Previous",onClick:function(){1===e.state.currentPage?e.setCurrentPage(1):e.setCurrentPage(e.state.currentPage-1)}},"Previous")],o=[n.a.createElement("div",{className:"".concat("footer__button-page"),key:"Next",onClick:function(){e.state.currentPage===a.length?e.setCurrentPage(a.length):e.setCurrentPage(e.state.currentPage+1)}},"Next"),n.a.createElement("div",{className:"".concat("footer__button-page"),key:"Last",onClick:function(){e.setCurrentPage(a.length)}},"Last")];return n.a.createElement(s.Fragment,null,n.a.createElement("footer",{className:"app__footer"},n.a.createElement("div",{className:"footer__select-page"},n.a.createElement("p",null,"Show",n.a.createElement("select",{onChange:this.handleSelect,className:"select__content-page"},n.a.createElement("option",{value:"5"},"5"),n.a.createElement("option",{value:"10"},"10"),n.a.createElement("option",{value:"20"},"20")),"entries per page")),n.a.createElement("div",{className:"footer__button"},c,this.createButtons(r,i),o)),n.a.createElement("div",{className:"pagination-results"},l?n.a.createElement(k,{sessionsList:l,renderTime:this.props.renderTime,orderResultsUsername:this.props.orderResultsUsername,orderResultsTimeStarted:this.props.orderResultsTimeStarted,orderResultsDuration:this.props.orderResultsDuration,orderResultsRequestCount:this.props.orderResultsRequestCount}):"no results"))}}]),t}(s.Component);O.Proptypes={sessionsList:g.a.array.isRequired,children:g.a.element.isRequired,renderTime:g.a.func.isRequired,orderResultsUsername:g.a.func.isRequired,orderResultsTimeStarted:g.a.func.isRequired,orderResultsDuration:g.a.func.isRequired,orderResultsRequestCount:g.a.func.isRequired};var C=O,j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={userData:[],activePetition:!1,queryUsername:"",sessionsList:[],duplicatedArray:!1,filter:"",resultsNumber:"0"},a.renderTime=a.renderTime.bind(Object(d.a)(Object(d.a)(a))),a.getQueryUsername=a.getQueryUsername.bind(Object(d.a)(Object(d.a)(a))),a.orderResultsUsername=a.orderResultsUsername.bind(Object(d.a)(Object(d.a)(a))),a.orderResultsTimeStarted=a.orderResultsTimeStarted.bind(Object(d.a)(Object(d.a)(a))),a.orderResultsDuration=a.orderResultsDuration.bind(Object(d.a)(Object(d.a)(a))),a.orderResultsRequestCount=a.orderResultsRequestCount.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchSessions()}},{key:"fetchSessions",value:function(){var e=this;fetch("http://adalab.stylesage.co/api/v1/sessions/").then(function(e){return e.json()}).then(function(t){e.setState({userData:t,sessionsList:t.sessions,duplicatedArray:!0,resultsDate:"",resultsNumber:""}),e.calculateResultsNumber(e.state.sessionsList),e.calculateFromToDate(e.state.userData)})}},{key:"calculateFromToDate",value:function(){var e=this.renderTime(this.state.userData.from_date)+" and "+this.renderTime(this.state.userData.to_date);this.setState({resultsDate:e})}},{key:"calculateResultsNumber",value:function(e){var t=parseInt(e.length)+"/"+parseInt(this.state.userData.sessions.length);this.setState({resultsNumber:t})}},{key:"addZero",value:function(e){return e.length<2&&(e="0"+e),e}},{key:"renderTime",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+this.addZero((t.getMonth()+1).toString())+"-"+this.addZero(t.getDate().toString())+","+this.addZero(t.getHours().toString())+":"+this.addZero(t.getMinutes().toString())}},{key:"filterUserame",value:function(e){return this.state.userData.sessions.filter(function(t){return t.user__username.includes(e)})}},{key:"getQueryUsername",value:function(e){var t=this,a=e.currentTarget.value,s=this.filterUserame(a),n="";switch(this.state.filter){case"Username-up":n=this.orderUsername(s);break;case"Username-down":n=this.orderUsername(s).reverse();break;case"TimeStarted-up":n=this.orderTimeStarted(s);break;case"TimeStarted-down":n=this.orderTimeStarted(s).reverse();break;case"Duration-up":n=this.orderDuration(s);break;case"Duration-down":n=this.orderDuration(s).reverse();break;case"RequestCount-up":n=this.orderRequestCount(s);break;case"RequestCount-down":n=this.orderRequestCount(s).reverse();break;default:n=s}this.calculateResultsNumber(n),this.setState({queryUsername:a,sessionsList:n},function(){return t.refs.child.getButtons()})}},{key:"orderUsername",value:function(e){return e.sort(function(e,t){var a=e.user__username.toUpperCase(),s=t.user__username.toUpperCase();return a<s?-1:a>s?1:0})}},{key:"orderResultsUsername",value:function(e){var t=this,a=this.orderUsername(this.state.sessionsList);"down"===e.currentTarget.getAttribute("data-arrow")?this.setState({sessionsList:a.reverse(),filter:"Username-down"},function(){return t.refs.child.getButtons()}):this.setState({sessionsList:a,filter:"Username-up"},function(){return t.refs.child.getButtons()})}},{key:"orderTimeStarted",value:function(e){return e.sort(function(e,t){return new Date(e.min_timestamp)-new Date(t.min_timestamp)})}},{key:"orderResultsTimeStarted",value:function(e){var t=this,a=this.orderTimeStarted(this.state.sessionsList);"down"===e.currentTarget.getAttribute("data-arrow")?this.setState({sessionsList:a.reverse(),filter:"TimeStarted-down"},function(){return t.refs.child.getButtons()}):this.setState({sessionsList:a,filter:"TimeStarted-up"},function(){return t.refs.child.getButtons()})}},{key:"orderDuration",value:function(e){return e.sort(function(e,t){return e.duration_sec-t.duration_sec})}},{key:"orderResultsDuration",value:function(e){var t=this,a=this.orderDuration(this.state.sessionsList);"down"===e.currentTarget.getAttribute("data-arrow")?this.setState({sessionsList:a.reverse(),filter:"Duration-down"},function(){return t.refs.child.getButtons()}):this.setState({sessionsList:a,filter:"Duration-up"},function(){return t.refs.child.getButtons()})}},{key:"orderRequestCount",value:function(e){return e.sort(function(e,t){return e.request_count-t.request_count})}},{key:"orderResultsRequestCount",value:function(e){var t=this,a=this.orderRequestCount(this.state.sessionsList);"down"===e.currentTarget.getAttribute("data-arrow")?this.setState({sessionsList:a.reverse(),filter:"RequestCount-down"},function(){return t.refs.child.getButtons()}):this.setState({sessionsList:a,filter:"RequestCount-up"},function(){return t.refs.child.getButtons()})}},{key:"render",value:function(){var e=this.state,t=e.sessionsList,a=e.duplicatedArray,s=e.resultsDate,r=e.resultsNumber;return n.a.createElement("div",{className:"app__container  ".concat(this.props.hiddenButton)},n.a.createElement("main",{className:"app__main"},n.a.createElement("div",{className:"breadcrumb__container"},n.a.createElement("ul",{className:"breadcrumb__container-list"},n.a.createElement("li",{className:"breadcrumb__container-item"},n.a.createElement(b.a,{to:"/",className:"breadcrumb__link"},"Overview")),"  >",n.a.createElement("li",{className:"breadcrumb__container-item"},n.a.createElement("span",null,"Sessions")))),n.a.createElement("div",{className:"panel__session"},n.a.createElement("i",{className:"zmdi zmdi-apps"}),n.a.createElement("h2",{className:"panel__session-title"},"Sessions between ",s)),n.a.createElement(E,{getQueryUsername:this.getQueryUsername,resultsNumber:r}),n.a.createElement("div",{className:"table__container-session"},!0===a?n.a.createElement(C,{ref:"child",renderTime:this.renderTime,orderResultsUsername:this.orderResultsUsername,orderResultsTimeStarted:this.orderResultsTimeStarted,orderResultsDuration:this.orderResultsDuration,orderResultsRequestCount:this.orderResultsRequestCount,sessionsList:t}):n.a.createElement("p",null,"Looking for data..."))))}}]),t}(s.Component),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={table:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"chartNames",value:function(){return this.props.chartList.reduce(function(e,t){var a=e.findIndex(function(e){return e[0]===t.details.chart_name});if(-1===a){var s=[];s.push(t.details.chart_name),s.push(1),s.push([t.request.user__username]),e.push(s)}else e[a][1]+=1,-1===e[a][2].indexOf(t.request.user__username)&&e[a][2].push(t.request.user__username);return e},[[]]).splice(1)}},{key:"visibility",value:function(){return!0===this.props.hiddenButton?"":"displace"}},{key:"render",value:function(){var e,t=this.props.chartList,a=this.chartNames();return 0!==a.length&&(e=a.sort(function(e,t){return t[1]-e[1]}).map(function(e,a){return n.a.createElement("tr",{className:"table__tr",key:a},n.a.createElement("td",{className:"table__td"},e[0]),n.a.createElement("td",{className:"table__td"},e[1]),n.a.createElement("td",{className:"table__td"},(e[1]/t.length*100).toFixed(1),"%",n.a.createElement("div",{className:"table__bar-container"},n.a.createElement("div",{className:"table__bar",style:{width:"".concat((e[1]/t.length*100).toFixed(1),"%")}}))),n.a.createElement("td",{className:"table__td"},e[2].length))})),n.a.createElement("table",{className:"table",id:"table"},n.a.createElement("thead",{className:"table__thead"},n.a.createElement("tr",{className:"table__tr-title "},n.a.createElement("th",{className:"table__th "},n.a.createElement("div",{className:"table__content table__content-col2"},n.a.createElement("p",{className:"table__title"},"Chart"))),n.a.createElement("th",{className:"table__th small-col"},n.a.createElement("div",{className:"table__content small-col"},n.a.createElement("p",{className:"table__title"},"Times Used"))),n.a.createElement("th",{className:"table__th"},n.a.createElement("div",{className:"table__content small-col"},n.a.createElement("p",{className:"table__title"},"%"))),n.a.createElement("th",{className:"table__th"},n.a.createElement("div",{className:"table__content small-col"},n.a.createElement("p",{className:"table__title"},"Users"))))),n.a.createElement("tbody",{className:"table__tbody"},e))}}]),t}(s.Component),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={userData:[],chartList:[],allGroupsList:[],groupsList:[],filterOptionsChecked:!1,timelapse:7,display:"hidden",fromDate:new Date,toDate:new Date},a.handleOptions=a.handleOptions.bind(Object(d.a)(Object(d.a)(a))),a.handleChangeDate=a.handleChangeDate.bind(Object(d.a)(Object(d.a)(a))),a.handleDateFrom=a.handleDateFrom.bind(Object(d.a)(Object(d.a)(a))),a.handleDateTo=a.handleDateTo.bind(Object(d.a)(Object(d.a)(a))),a.visibilitySetDate=a.visibilitySetDate.bind(Object(d.a)(Object(d.a)(a))),a.handleUserGroups=a.handleUserGroups.bind(Object(d.a)(Object(d.a)(a))),a.selectAllGroups=a.selectAllGroups.bind(Object(d.a)(Object(d.a)(a))),a.clearAllGroups=a.clearAllGroups.bind(Object(d.a)(Object(d.a)(a))),a.filterAll=a.filterAll.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchGroups(),this.renderUserGroups(!0),this.fetchCharts(this.state.timelapse)}},{key:"getGroups",value:function(e){return e.map(function(e){return e.name})}},{key:"renderUserGroups",value:function(e){var t=this;this.setState(function(a){return{userGroupsInputs:a.allGroupsList.map(function(a,s){return n.a.createElement("li",{key:s},n.a.createElement("label",{htmlFor:a},n.a.createElement("input",{onChange:t.handleUserGroups,id:a,type:"checkbox",value:a,name:a,defaultChecked:e}),a))})}})}},{key:"fetchGroups",value:function(){var e=this;fetch("http://adalab.stylesage.co/api/v1/users_by_group/").then(function(e){return e.json()}).then(function(t){var a=e.getGroups(t.groups),s=a.slice();e.setState({allGroupsList:s,groupsList:a},function(){return e.renderUserGroups(!0)})})}},{key:"fetchCharts",value:function(e){var t,a,s=this,n=new Date,r=(new Date).setDate(n.getDate()-e);r=new Date(r).toISOString(),n=new Date(n).toISOString(),(t=r,a=n,fetch("".concat("http://adalab.stylesage.co/api/v1/charts/","?from_date=").concat(t,"&to_date=").concat(a)).then(function(e){return e.json()})).then(function(e){s.setState({chartList:e.open_chart_events,userData:e}),s.filterAll()})}},{key:"handleOptions",value:function(e){var t=this,a=e.currentTarget.checked;this.setState({filterOptionsChecked:a},function(){return t.filterAll()})}},{key:"handleDateTo",value:function(e){var t=this;e.persist(),this.setState({toDate:e.currentTarget.value},function(){return t.handleChangeDate(e)})}},{key:"handleDateFrom",value:function(e){var t=this;e.persist(),this.setState({fromDate:e.currentTarget.value},function(){return t.handleChangeDate(e)})}},{key:"handleChangeDate",value:function(e){var t,a=new Date,s=new Date;switch(e.currentTarget&&(t=e.currentTarget.value),t){case"last-week":s.setDate(s.getDate()-7);break;case"last-month":s.setMonth(s.getMonth()-1);break;case"last-two-months":s.setMonth(s.getMonth()-2);break;case"always":s=new Date(2015,0,1,0,0);break;default:a=new Date(this.state.toDate),s=new Date(this.state.fromDate)}var n=Math.round((a-s)/864e5);this.setState({timelapse:n}),this.fetchCharts(n)}},{key:"handleUserGroups",value:function(e){var t=this,a=e.currentTarget.value;this.setState(function(e){var t=e.groupsList;return-1===t.indexOf(a)?t.push(a):t.splice(t.indexOf(a),1),{groupsList:t}},function(){return t.filterAll()})}},{key:"filterAll",value:function(){var e=this,t=this.state.userData.open_chart_events,a=this.state.filterOptionsChecked,s=t.filter(function(e){return a?!e.request.user__username.includes("stylesage"):e}).filter(function(t){for(var a=e.state.groupsList.map(function(e){return t.request.user__group__name===e}),s=!1,n=0;n<a.length;n++)!0===a[n]&&(s=!0);return s});this.setState({chartList:s})}},{key:"visibilitySetDate",value:function(e){var t="hidden"===this.state.display&&"set-date"===e.currentTarget.value?"":"hidden";this.setState({display:t})}},{key:"selectAllGroups",value:function(){var e=this;this.setState(function(e){return{userGroupsInputs:"",groupsList:e.allGroupsList.slice()}},function(){e.renderUserGroups(!0),e.filterAll()})}},{key:"clearAllGroups",value:function(){var e=this;this.setState({userGroupsInputs:"",groupsList:[]},function(){e.renderUserGroups(!1),e.filterAll()})}},{key:"render",value:function(){var e=this.state,t=e.chartList,a=e.display,s=this.state.userGroupsInputs;return n.a.createElement("div",{className:"app__container  ".concat(this.props.hiddenButton)},n.a.createElement("main",{className:"app__main"},n.a.createElement("div",{className:"breadcrumb__container"},n.a.createElement("ul",{className:"breadcrumb__container-list"},n.a.createElement("li",{className:"breadcrumb__container-item"},n.a.createElement(b.a,{to:"/",className:"breadcrumb__link"},"Overview")),"  >",n.a.createElement("li",{className:"breadcrumb__container-item"},n.a.createElement("span",null,"ChartsUsage")))),n.a.createElement("div",{className:"charts__container"},n.a.createElement("div",{className:"table__container"},n.a.createElement(D,{chartList:t})),n.a.createElement("div",{className:"chart__filters"},n.a.createElement("div",{className:"chart__filter chart__filter-options"},n.a.createElement("div",{className:"chart__filter-header"},n.a.createElement("i",{className:"zmdi zmdi-account-add"}),n.a.createElement("h3",{className:"chart__filter-title"},"OPTIONS")),n.a.createElement("div",{className:"chart__filter-content"},n.a.createElement("label",null,n.a.createElement("input",{type:"checkbox",onClick:this.handleOptions,defaultChecked:!1})," exclude support users (x@stylesage.com)"))),n.a.createElement("div",{className:"chart__filter chart__filter-range"},n.a.createElement("div",{className:"chart__filter-header"},n.a.createElement("i",{className:"zmdi zmdi-calendar-check"}),n.a.createElement("h3",{className:"chart__filter-title"},"DATE RANGE")),n.a.createElement("div",{className:"chart__filter-content"},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"last-week"},n.a.createElement("input",{defaultChecked:!0,onClick:this.visibilitySetDate,onChange:this.handleChangeDate,type:"radio",id:"last-week",name:"date",value:"last-week",className:"input__type-radio"}),n.a.createElement("span",null),"last week")),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"last-month"},n.a.createElement("input",{onClick:this.visibilitySetDate,onChange:this.handleChangeDate,type:"radio",id:"last-month",name:"date",value:"last-month",className:"input__type-radio"}),n.a.createElement("span",null),"last month")),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"last-two-months"},n.a.createElement("input",{onClick:this.visibilitySetDate,onChange:this.handleChangeDate,type:"radio",id:"last-two-months",name:"date",value:"last-two-months",className:"input__type-radio"}),n.a.createElement("span",null),"last 2 months")),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"set-date"},n.a.createElement("input",{onClick:this.visibilitySetDate,type:"radio",id:"set-date",name:"date",value:"set-date",className:"input__type-radio"}),n.a.createElement("span",null),"set date")),n.a.createElement("div",{className:"contentSetDate ".concat(a)},n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"from-date"},n.a.createElement("input",{onChange:this.handleDateFrom,id:"from-date",type:"date",name:"date??"}),"from date")),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"to-date"},n.a.createElement("input",{onChange:this.handleDateTo,id:"to-date",type:"date",name:"date??"}),"to date"))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"always"},n.a.createElement("input",{onClick:this.visibilitySetDate,onChange:this.handleChangeDate,type:"radio",id:"always",name:"date",value:"always",className:"input__type-radio"}),n.a.createElement("span",null),"always")))),n.a.createElement("div",{className:"chart__filter chart__filter-groups"},n.a.createElement("div",{className:"chart__filter-header"},n.a.createElement("i",{className:"zmdi zmdi-accounts"}),n.a.createElement("h3",{className:"chart__filter-title"},"USER GROUPS")),n.a.createElement("div",{className:"chart__filter-content"},n.a.createElement("div",{className:"chart__filter-select"},n.a.createElement("button",{type:"button",className:"btn-select",onClick:this.selectAllGroups,"data-select":"select all"},"select all"),n.a.createElement("button",{type:"button",className:"btn-select",onClick:this.clearAllGroups,"data-select":"clear all"},"clear all")),n.a.createElement("ul",{className:"chart__filter-listgroups"},s)))))))}}]),t}(s.Component),w=(a(27),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={hiddenButton:""},a.handleClick=a.handleClick.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(){var e="displace"===this.state.hiddenButton?"":"displace";this.setState({hiddenButton:e})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"app"},n.a.createElement(p,{onClick:this.handleClick}),n.a.createElement("div",{className:"page__wrapper"},n.a.createElement(f,{hiddenButton:"displace"!==this.state.hiddenButton}),n.a.createElement(h.a,null,n.a.createElement(_.a,{exact:!0,path:"/",render:function(){return n.a.createElement(v,{hiddenButton:e.state.hiddenButton})}}),n.a.createElement(_.a,{path:"/session-list",render:function(){return n.a.createElement(j,{hiddenButton:e.state.hiddenButton})}}),n.a.createElement(_.a,{path:"/charts-usage",render:function(){return n.a.createElement(S,{hiddenButton:e.state.hiddenButton})}}))))}}]),t}(s.Component)),R=a(32);l.a.render(n.a.createElement(R.a,null,n.a.createElement(w,null)),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.e1088643.chunk.js.map